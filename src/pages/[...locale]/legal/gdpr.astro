---
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import Layout from "@/layouts/Layout.astro";
import { translateFor } from "@/i18n/utils";
import { SITE } from "@/config";

const currentLocale = Astro.currentLocale;
const t = translateFor(currentLocale);
const lastUpdated = "January 15, 2026";
---

<Layout title="GDPR Compliance" description="GDPR Compliance and Data Protection Rights">
  <main class="container py-16 md:py-24">
    <div class="mx-auto max-w-4xl space-y-8">
      <div class="space-y-4">
        <h1 class="text-4xl font-bold tracking-tight md:text-5xl">GDPR Compliance</h1>
        <p class="text-lg text-muted-foreground">Last updated: {lastUpdated}</p>
        <p class="text-muted-foreground">
          This page explains how we comply with the General Data Protection Regulation (GDPR) and outlines your rights
          as a data subject.
        </p>
      </div>

      <Card client:load>
        <CardContent className="prose prose-slate dark:prose-invert max-w-none pt-6">
          <h2>1. GDPR Overview</h2>
          <p>
            The General Data Protection Regulation (GDPR) is a comprehensive data protection law in the European Union
            that strengthens and unifies data protection for all individuals within the EU. We are committed to full
            compliance with GDPR requirements.
          </p>

          <h2>2. Lawful Basis for Processing</h2>
          <p>We process your personal data based on the following lawful bases:</p>
          <ul>
            <li><strong>Consent:</strong> You have given clear consent for us to process your personal data for a specific purpose</li>
            <li><strong>Contract:</strong> Processing is necessary for a contract we have with you</li>
            <li><strong>Legal Obligation:</strong> Processing is necessary to comply with the law</li>
            <li><strong>Legitimate Interests:</strong> Processing is necessary for our legitimate interests or those of a third party</li>
          </ul>

          <h2>3. Your GDPR Rights</h2>
          <p>Under GDPR, you have the following rights regarding your personal data:</p>

          <h3>3.1 Right to Access</h3>
          <p>
            You have the right to request a copy of all personal data we hold about you. We will provide this
            information in a commonly used electronic format within 30 days of your request.
          </p>

          <h3>3.2 Right to Rectification</h3>
          <p>
            You have the right to request correction of any inaccurate or incomplete personal data we hold about you.
            We will make corrections within 30 days.
          </p>

          <h3>3.3 Right to Erasure ("Right to be Forgotten")</h3>
          <p>
            You have the right to request deletion of your personal data when:
          </p>
          <ul>
            <li>The data is no longer necessary for the purpose it was collected</li>
            <li>You withdraw consent and there is no other legal basis for processing</li>
            <li>You object to processing and there are no overriding legitimate grounds</li>
            <li>The data has been unlawfully processed</li>
            <li>The data must be erased to comply with a legal obligation</li>
          </ul>

          <h3>3.4 Right to Restriction of Processing</h3>
          <p>
            You have the right to request that we restrict processing of your personal data in certain circumstances,
            such as when you contest the accuracy of the data or object to processing.
          </p>

          <h3>3.5 Right to Data Portability</h3>
          <p>
            You have the right to receive your personal data in a structured, commonly used, and machine-readable
            format, and to transmit that data to another controller.
          </p>

          <h3>3.6 Right to Object</h3>
          <p>
            You have the right to object to processing of your personal data based on legitimate interests or for
            direct marketing purposes.
          </p>

          <h3>3.7 Rights Related to Automated Decision Making</h3>
          <p>
            You have the right not to be subject to decisions based solely on automated processing, including profiling,
            which produces legal effects or similarly significantly affects you.
          </p>

          <h3>3.8 Right to Withdraw Consent</h3>
          <p>
            Where we rely on your consent to process personal data, you have the right to withdraw that consent at any
            time. This will not affect the lawfulness of processing based on consent before its withdrawal.
          </p>

          <h2>4. How to Exercise Your Rights</h2>
          <p>To exercise any of your GDPR rights:</p>
          <ol>
            <li>Email us at: gdpr@{SITE.website.replace("https://", "").replace("/", "")}</li>
            <li>Include your full name and account email address</li>
            <li>Specify which right(s) you wish to exercise</li>
            <li>Provide any additional relevant information</li>
          </ol>
          <p>
            We will respond to your request within 30 days. If we need more time, we will notify you and explain the
            reason for the delay.
          </p>

          <h2>5. Data Protection Officer</h2>
          <p>
            We have appointed a Data Protection Officer (DPO) to oversee our GDPR compliance. You can contact our DPO
            at: dpo@{SITE.website.replace("https://", "").replace("/", "")}
          </p>

          <h2>6. International Data Transfers</h2>
          <p>
            When we transfer personal data outside the EEA, we ensure appropriate safeguards are in place, such as:
          </p>
          <ul>
            <li>Standard Contractual Clauses (SCCs) approved by the EU Commission</li>
            <li>Transfers to countries with adequacy decisions</li>
            <li>Privacy Shield certification (where applicable)</li>
            <li>Binding Corporate Rules (BCRs)</li>
          </ul>

          <h2>7. Data Retention</h2>
          <p>We retain personal data only for as long as necessary to fulfill the purposes for which it was collected:</p>
          <ul>
            <li><strong>Account Data:</strong> Retained while your account is active, plus 30 days after closure</li>
            <li><strong>Transaction Data:</strong> Retained for 7 years for legal and accounting purposes</li>
            <li><strong>Marketing Data:</strong> Retained until you withdraw consent or opt out</li>
            <li><strong>Support Tickets:</strong> Retained for 2 years after resolution</li>
          </ul>

          <h2>8. Cookies and Tracking</h2>
          <p>
            Under GDPR, we must obtain your consent for non-essential cookies. We provide:
          </p>
          <ul>
            <li>Clear information about all cookies we use</li>
            <li>Granular consent options for different cookie categories</li>
            <li>Easy way to withdraw cookie consent</li>
            <li>Cookie preference management tool</li>
          </ul>

          <h2>9. Children's Data</h2>
          <p>
            We do not knowingly collect personal data from children under 16 without parental consent. If we discover
            we have collected data from a child under 16 without proper consent, we will delete it promptly.
          </p>

          <h2>10. Data Breach Notification</h2>
          <p>
            In the event of a data breach that is likely to result in a risk to your rights and freedoms, we will:
          </p>
          <ul>
            <li>Notify the relevant supervisory authority within 72 hours</li>
            <li>Notify affected individuals without undue delay</li>
            <li>Provide clear information about the breach and our response</li>
            <li>Offer appropriate measures to mitigate potential harm</li>
          </ul>

          <h2>11. Supervisory Authority</h2>
          <p>
            You have the right to lodge a complaint with a supervisory authority, particularly in the EU member state
            of your habitual residence, place of work, or place of alleged infringement.
          </p>
          <p>
            For complaints within the EU, you can find your local supervisory authority at:
            <a href="https://edpb.europa.eu/about-edpb/board/members_en" target="_blank" rel="noopener noreferrer">
              European Data Protection Board - Members
            </a>
          </p>

          <h2>12. Privacy by Design and Default</h2>
          <p>
            We implement privacy by design and by default principles:
          </p>
          <ul>
            <li>Data minimization - we collect only necessary data</li>
            <li>Purpose limitation - data used only for specified purposes</li>
            <li>Storage limitation - data kept only as long as necessary</li>
            <li>Accuracy - we maintain accurate and up-to-date data</li>
            <li>Integrity and confidentiality - appropriate security measures</li>
          </ul>

          <h2>13. Record of Processing Activities</h2>
          <p>
            We maintain comprehensive records of our data processing activities as required by GDPR Article 30,
            including:
          </p>
          <ul>
            <li>Purposes of processing</li>
            <li>Categories of data subjects and personal data</li>
            <li>Categories of recipients</li>
            <li>International transfers</li>
            <li>Retention periods</li>
            <li>Technical and organizational security measures</li>
          </ul>

          <h2>14. Contact Information</h2>
          <p>For GDPR-related inquiries or to exercise your rights:</p>
          <ul>
            <li><strong>Email:</strong> gdpr@{SITE.website.replace("https://", "").replace("/", "")}</li>
            <li><strong>Data Protection Officer:</strong> dpo@{SITE.website.replace("https://", "").replace("/", "")}</li>
            <li><strong>Website:</strong> {SITE.website}</li>
          </ul>
        </CardContent>
      </Card>

      <!-- Quick Actions -->
      <Card client:load>
        <CardContent className="pt-6">
          <h3 class="text-lg font-semibold mb-4">Quick Actions</h3>
          <div class="grid gap-3 sm:grid-cols-2">
            <Button variant="outline" client:load>
              Request My Data
            </Button>
            <Button variant="outline" client:load>
              Delete My Account
            </Button>
            <Button variant="outline" client:load>
              Update Preferences
            </Button>
            <Button variant="outline" client:load>
              Manage Cookies
            </Button>
          </div>
        </CardContent>
      </Card>
    </div>
  </main>
</Layout>
